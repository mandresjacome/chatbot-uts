/* ====== Tema base (auto) ====== */
:root {
  /* por defecto (modo claro) */
  --bg:#f7fafc; --panel:#ffffff; --bubble:#f1f5f9; --me:#38bdf8;
  --text:#0f172a; --muted:#64748b; --border:#e2e8f0; --ok:#16a34a; --err:#ef4444;
}

/* Forzar claro/oscuro usando data-theme en <html> */
html[data-theme="dark"] {
  --bg:#0b1220; --panel:#0f172a; --bubble:#1f2937; --me:#0ea5e9;
  --text:#e5e7eb; --muted:#9ca3af; --border:#334155; --ok:#22c55e; --err:#ef4444;
}
html[data-theme="light"] {
  --bg:#f7fafc; --panel:#ffffff; --bubble:#f1f5f9; --me:#38bdf8;
  --text:#0f172a; --muted:#64748b; --border:#e2e8f0; --ok:#16a34a; --err:#ef4444;
}

/* Modo automático removido - solo light y dark */

/* ====== Layout ====== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:system-ui,Segoe UI,Roboto,Ubuntu;
  background:linear-gradient(180deg,var(--bg),var(--panel)); color:var(--text);
  display:flex; flex-direction:column;
}
/* Header simplificado */
.top{
  display:flex; align-items:center; gap:12px;
  padding:10px 14px; border-bottom:1px solid var(--border); background:var(--panel); position:sticky; top:0;
}
.brand{display:flex;align-items:center}
.brand h1{font-size:16px;margin:0}

/* Botón de tema deslizable desde el borde */
.theme-btn-floating {
  position: fixed;
  top: 50%;
  right: -22px; /* Parcialmente oculto en el borde */
  width: 44px;
  height: 44px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: -2px 0 8px rgba(0,0,0,0.1);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
  opacity: 0.9;
  transform: translateY(-50%);
}

.theme-btn-floating:hover {
  right: 16px; /* Se desliza hacia adentro */
  opacity: 1;
  box-shadow: -4px 0 16px rgba(0,0,0,0.15);
  transform: translateY(-50%) scale(1.05);
}

.theme-btn-floating svg {
  width: 20px;
  height: 20px;
  fill: var(--text);
  transition: all 0.4s ease;
}

.theme-btn-floating:hover svg {
  transform: rotate(180deg);
}

/* Tooltip del botón de tema */
.theme-tooltip {
  position: absolute;
  right: 55px;
  top: 50%;
  transform: translateY(-50%) translateX(10px);
  background: var(--text);
  color: var(--bg);
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.theme-btn-floating:hover .theme-tooltip {
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}

.theme-tooltip::after {
  content: '';
  position: absolute;
  left: 100%;
  top: 50%;
  transform: translateY(-50%);
  border: 6px solid transparent;
  border-left-color: var(--text);
}

.chat{flex:1; overflow:auto; padding:16px; display:flex; flex-direction:column; gap:12px}
.msg{
  max-width:75%; padding:10px 12px; border-radius:14px; background:var(--bubble);
  border:1px solid var(--border); line-height:1.35; white-space:pre-wrap;
}
.msg.me{
  background:linear-gradient(90deg,var(--me),#60e1ff); color:#032231; margin-left:auto;
}
.meta{font-size:12px; color:var(--muted); margin-top:6px}
.typing{opacity:.7; font-style:italic}

.bar{
  display:flex; gap:10px; padding:14px; border-top:1px solid var(--border); 
  background:var(--panel); backdrop-filter: blur(10px);
  box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
}
#msg{
  flex:1; background:var(--bg); color:var(--text); border:2px solid var(--border);
  border-radius:16px; padding:12px 14px; resize:none; min-height:44px; max-height:120px;
  font-size:14px; line-height:1.3; font-family:inherit;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  outline: none;
}
#msg:focus{
  border-color: var(--me);
  box-shadow: 0 4px 20px rgba(56, 189, 248, 0.15), 0 0 0 3px rgba(56, 189, 248, 0.1);
  transform: translateY(-1px);
}
#msg::placeholder{
  color: var(--muted);
  opacity: 0.7;
  font-size: 13px;
}
#send{
  background: linear-gradient(135deg, #C9D72F 0%, #0b4a75 100%); 
  color: white; 
  border: none; 
  padding: 10px; 
  border-radius: 14px;
  font-weight: 600; 
  cursor: pointer;
  font-size: 16px;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 16px rgba(11, 74, 117, 0.25);
}
#send:hover{
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 6px 24px rgba(11, 74, 117, 0.35);
}
#send:active{
  transform: translateY(-1px) scale(1.01);
  box-shadow: 0 3px 12px rgba(11, 74, 117, 0.3);
}
.ref{font-size:12px; color:var(--muted); margin-top:6px}
.references{font-size:12px; color:var(--muted); margin-top:6px; line-height:1.4}
.references a{
  color:var(--me); text-decoration:none; margin:0 2px;
  border-radius:4px; padding:1px 3px; 
  transition: background-color 0.2s ease;
}
.references a:hover{
  background-color:var(--border); text-decoration:underline;
}
.actions{margin-top:6px; display:flex; gap:8px}
.actions button{
  background:var(--bg); color:var(--text); border:1px solid var(--border);
  border-radius:8px; padding:4px 8px; cursor:pointer; font-size:12px;
  transition: all 0.2s ease;
}
.actions button:hover:not(:disabled){
  background:var(--border); opacity:0.8;
}
.actions button:disabled{
  cursor:not-allowed; opacity:0.5;
}
.actions button.voted-positive{
  background:#4CAF50; color:white; border-color:#4CAF50;
}
.actions button.voted-negative{
  background:#f44336; color:white; border-color:#f44336;
}
.err{color:var(--err)}

@media (max-width: 640px) {.msg{max-width:90%}}
